### Clicker Mania 1.0

Приложение отчитащо броя кликове на потребителя е представено на Фиг. 25. Изходния код от дизайна на потребителския интерфейс \(XAML\) и бизнес логиката \(C\#\) на приложението са дадени в програмните фрагменти по-долу.

**MainPage.xaml**

```
<StackPanel Background="Orange" Padding="30">
<TextBlock FontSize="32" HorizontalAlignment="Center" Text="ClickerMania 1.0" />
<TextBlock Name="Click" HorizontalAlignment="Center" Text="0" FontSize="100" Padding="30" FontWeight="ExtraBlack" />
<Button Content="Click" HorizontalAlignment="Center" FontSize="60" Click="Button_Click" />
</StackPanel>
```

**MainPage.xaml.cs**

```
// var
private int counter = 0;
private StorageFile file;
private StorageFolder local = ApplicationData.Current.LocalFolder;

// Constructor
public MainPage()
{
 this.InitializeComponent();
 Read();
}

// Button Even Handler
private async void Button_Click(object sender, RoutedEventArgs e)
{
 counter++;
 Click.Text = counter.ToString();
 // Save to file
 byte[] bytes = System.Text.Encoding.UTF8.GetBytes(Click.Text.ToCharArray());
 var _file = await local.CreateFileAsync("clicker.txt", CreationCollisionOption.ReplaceExisting);
 using (var _stream = await _file.OpenStreamForWriteAsync()) _stream.Write(bytes, 0, bytes.Length);
}

// Read from File
private async void Read()
{
 try
 {
 file = await local.GetFileAsync("clicker.txt");
 if (file == null) file = await local.CreateFileAsync("clicker.txt");
 else
 {
 Stream stream = await file.OpenStreamForReadAsync();
 StreamReader reader = new StreamReader(stream);
 Click.Text = reader.ReadToEnd();
 if (Click.Text == "")
 {
 Click.Text = "0";
 counter = 0;
 }
 else counter = int.Parse(Click.Text);
 }
 }
 catch { ;; }
}
```

![](/chapter1/25.png)

_Фиг.25 Приложение отчитащо броя кликове на потребителя._

